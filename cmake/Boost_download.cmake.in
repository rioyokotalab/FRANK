cmake_minimum_required(VERSION 3.5)
include(ExternalProject)
project(Boost)
set(BOOST_VERSION 1.65.0)
configure_file(
    @CMAKE_SOURCE_DIR@/cmake/Boost_CMakeLists.cmake.in
    @CMAKE_CURRENT_BINARY_DIR@/${PROJECT_NAME}-build/CMakeLists.txt
    @ONLY
)
ExternalProject_Add(${PROJECT_NAME}
    GIT_REPOSITORY      https://github.com/boostorg/property_tree.git
    GIT_TAG             boost-${BOOST_VERSION}
    GIT_SHALLOW         True
    GIT_CONFIG          advice.detachedHead=false
    SOURCE_DIR          "@CMAKE_SOURCE_DIR@/dependencies/${PROJECT_NAME}"
    BINARY_DIR          "@CMAKE_CURRENT_BINARY_DIR@/${PROJECT_NAME}_build"
    INSTALL_DIR         @DEPENDENCY_INSTALL_PREFIX@
    UPDATE_COMMAND      ""
    PATCH_COMMAND       cp <BINARY_DIR>/CMakeLists.txt <SOURCE_DIR>
    CMAKE_ARGS          -DCMAKE_INSTALL_PREFIX=<INSTALL_DIR>
                        -DCMAKE_BUILD_TYPE=Release
)
